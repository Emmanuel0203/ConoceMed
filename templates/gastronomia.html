{% extends "base.html" %}

{% block title %}Gastronom√≠a{% endblock %}

{% block head %}
  <!-- Estilos de Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

  <style>
  
    body {
      font-family: Arial, sans-serif;
      padding: 2rem;
      background-color: #86dddd;
    }

    h1 {
      color: #154360;
    }

    a button {
      background-color: #154360;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 20px;
      font-size: 1rem;
    }

    a button:hover {
      background-color: #0b2e4a;
    }

    #map {
      margin-top: 30px;
      height: 600px;
      width: 100%;
      border-radius: 10px;
      border: 2px solid #154360;
    }
  </style>
{% endblock %}

{% block content %}
  <h1>Gastronom√≠a</h1>
  <p>La gastronom√≠a de Medell√≠n es rica y variada, con platos tradicionales como la bandeja paisa.</p>

  <!-- Mapa interactivo -->
  <div id="map"></div>

  <!-- Bot√≥n de volver -->
  <a href="{{ url_for('index') }}#seccion2">
    <button>Volver</button>
  </a>
{% endblock %}

{% block scripts %}
  <!-- Script de Leaflet -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

  <script>
    // Inicializar el mapa en Medell√≠n
    var map = L.map('map').setView([6.2442, -75.5812], 13);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: '¬© OpenStreetMap'
    }).addTo(map);

    // üîπ Consumir API de sitios tur√≠sticos
    fetch("http://localhost:5031/sitio_turistico")
      .then(response => response.json())
      .then(data => {
        data.forEach(lugar => {
          // Filtrar solo los de categor√≠a Gastronom√≠a
          if (lugar.categoria && lugar.categoria.nombre === "Gastronom√≠a") {
            L.marker([lugar.lat, lugar.lng]).addTo(map)
              .bindPopup(`<b>${lugar.nombre}</b><br>${lugar.descripcion}`);
          }
        });
      })
      .catch(error => console.error("Error al cargar los datos:", error));
  </script>
{% endblock %}
